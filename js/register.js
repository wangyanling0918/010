$(function(){var $tishi=$(".tishi");var $tel=$(".tel");var flag1=flag2=flag3=false;var $msgList=$.cookie("msg")?JSON.parse($.cookie("msg")):[];var msgName;var msgPassword;$tel.find("input[type='text']").blur(function(){var pattern=/^\d{11}$/;if(!pattern.test($(this).val())){$(".tishi").html("手机号码不符合规范");flag1=false}else{var self=true;for(var i=0;i<$msgList.length;i++){if($(this).val()==$msgList[i].name){self=false;break}}if(self){$(".tishi").html("");msgName=$(this).val();flag1=true}else{$(".tishi").html("该用户名已被注册");flag1=false}}});$tel.find("input[type='password']").first().blur(function(){password($(this).val())});function password(Text){var pattern=/\s/;if(pattern.test(Text)){$(".tishi").html("密码不能有空格");flag2=false}else{if(Text.length<8){$(".tishi").html("密码长度不能小于八位");flag2=false}else{if(Text.length>16){$(".tishi").html("密码长度不能大于十六位");flag2=false}else{$(".tishi").html("");msgPassword=Text;flag2=true}}}}$tel.find("input[type='password']").last().blur(function(){confirmPassword($(this).val(),$tel)});function confirmPassword(Text,obj){if(obj.find("input[type='password']").first().val()!=Text){$(".tishi").html("输入密码不一致");flag3=false}else{$(".tishi").html("");flag3=true}}$("input[type='checkbox']").click(function(){if($(this).prop("checked")){$(this).parent().next().attr("id",null)}else{$(this).parent().next().attr("id","noclick")}});$("form").find("input[type='submit']").click(function(e){e.preventDefault();if($(this).attr("id")!="noclick"){if(flag1&&flag2&&flag3){var newMsg={"name":msgName,"password":msgPassword};$msgList.push(newMsg);$.cookie("msg",JSON.stringify($msgList),{expires:10,path:"/"});$msgList=$.cookie("msg")?JSON.parse($.cookie("msg")):[];$("form").find("input[type='text']").val(null);$("form").find("input[type='password']").val(null);console.log($.cookie("msg"));alert("注册成功!");location.href="entry.html?index"}else{alert("有信息不符合规范请重新输入")}}})});