$(function(){var str;verCode();function verCode(){str="";var arr=["a","b","c","d","e","f","g","h","i","g","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"];var i=0;while(i!=4){i++;str+=arr[parseInt(Math.random()*61)]}$(".verCode").html(str)}var $entry=$.cookie("entry")?JSON.parse($.cookie("entry")):[];if($entry.length!=0){$(".input1").first().val($entry.name);$(".input1").last().val($entry.password);$("form input[type='checkbox']").prop("checked",true)}$(".verCode").click(function(){verCode()});var $msgList=$.cookie("msg")?JSON.parse($.cookie("msg")):[];$("form input[type='submit']").click(function(e){e.preventDefault();var pattern=new RegExp($(".input2").val(),"gi");if(!pattern.test(str)){alert("验证码错误");verCode();$(".input2").val(null)}else{var flag=false;for(var i=0;i<$msgList.length;i++){if($(".input1").first().val()==$msgList[i].name&&$(".input1").last().val()==$msgList[i].password){flag=true;alert("登陆成功");break}}if(flag){var msg={"name":$(".input1").first().val()};if($("form input[type='checkbox']").prop("checked")){$.cookie("entry",JSON.stringify(msg),{expires:10,path:"/"})}else{$.cookie("entry","",{expires:0,path:"/"});$.cookie("entry2",JSON.stringify(msg),{expires:null,path:"/"})}var Return=window.location.search.replace("?","");if(Return=="detail"){history.back()}else{location.href=Return+".html"}}else{alert("用户不存在!");verCode();$(".input2").val(null)}}})});